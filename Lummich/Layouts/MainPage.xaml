<phone:PhoneApplicationPage
    x:Class="Lummich.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
        xmlns:local="clr-namespace:Lummich"
    SupportedOrientations="Portrait"
    Orientation="Portrait"
    shell:SystemTray.IsVisible="False">

    <Grid x:Name="LayoutRoot" Background="Transparent">

        <phone:Panorama Title="Lummich">

            <phone:Panorama.Background>
                <ImageBrush ImageSource="/Assets/PanoramaBackgroundCloudDarkScaled.jpg"/>
            </phone:Panorama.Background>

            <!-- ========================= -->
            <!--        PHOTO ROLL         -->
            <!-- ========================= -->
            <phone:PanoramaItem Header="Fotky">
                <Grid>
                    <TextBlock Text="Nebyly nalezeny žádné média. Ujistěte se že v nastavení aplikace máte přidané složky ke skenování."
                           TextWrapping="Wrap"
                           x:Name="NoMediaText"
                           Visibility="Collapsed" FontSize="24" Padding="10, 10, 10, 10"/>
                    <Button x:Name="RefreshButton" Visibility="Collapsed" Width="200" Height="100" VerticalAlignment="Top" Padding="10,5,10,6" Margin="0,100,0,0" FontFamily="Portable User Interface" Click="RefreshButton_Click">Refresh</Button>
                    <ScrollViewer x:Name="PhotoScroll" Margin="-2,0,-24,0">
                        <StackPanel x:Name="PhotoSectionsPanel"
                                    ManipulationStarted="Scroll_ManipulationStarted"
                                    ManipulationDelta="Scroll_ManipulationDelta"
                                    ManipulationCompleted="Scroll_ManipulationCompleted"
                                    Margin="12,0,12,0"
                        />
                    </ScrollViewer>
                </Grid>

            </phone:PanoramaItem>




            <!-- ========================= -->
            <!--         UPLOADER          -->
            <!-- ========================= -->
            <phone:PanoramaItem Header="Nahrávání">
                <ScrollViewer>
                    <StackPanel Margin="24,0,24,24">

                        <TextBlock Text="Uploader" 
                                   Style="{StaticResource PhoneTextLargeStyle}" />

                        <TextBlock Text="Soubory zbývá:" Margin="0,24,0,0"/>
                        <TextBlock Text="0 / 0" x:Name="FilesRemainingText"/>

                        <TextBlock Text="MB zbývá:" Margin="0,24,0,0"/>
                        <TextBlock Text="0 MB" x:Name="MbRemainingText"/>

                        <TextBlock Text="Aktuální endpoint:" Margin="0,24,0,0"/>
                        <TextBlock Text="http://example" x:Name="CurrentEndpointText"/>

                        <TextBlock Text="Aktuální soubor:" Margin="0,24,0,0"/>
                        <TextBlock Text="file.jpg" x:Name="CurrentFileText"/>

                        <TextBlock Text="Průběh aktuálního souboru:" Margin="0,24,0,0"/>
                        <ProgressBar x:Name="CurrentFileProgress" Height="20" Minimum="0" Maximum="100"/>

                        <TextBlock Text="Nahráno v této session:" Margin="0,24,0,0"/>
                        <TextBlock Text="0 / 0" x:Name="SessionCountText"/>

                        <TextBlock Text="Celkový průběh:" Margin="0,24,0,0"/>
                        <ProgressBar x:Name="TotalProgress" Height="20" Minimum="0" Maximum="100"/>

                        <Button Content="Start" Margin="0,36,0,0" x:Name="StartButton"/>
                        <Button Content="Stop" Margin="0,12,0,0" x:Name="StopButton"/>

                    </StackPanel>
                </ScrollViewer>
            </phone:PanoramaItem>

            <!-- ========================= -->
            <!--           STATS           -->
            <!-- ========================= -->
            <phone:PanoramaItem Header="Statistiky">
                <ScrollViewer>
                    <StackPanel Margin="24,0,24,24">

                        <TextBlock Text="Statistiky"
                                   Style="{StaticResource PhoneTextLargeStyle}" />

                        <TextBlock Text="Obrázky v telefonu:" Margin="0,24,0,0"/>
                        <TextBlock Text="0" x:Name="LocalPhotosCount"/>

                        <TextBlock Text="Videa v telefonu:" Margin="0,24,0,0"/>
                        <TextBlock Text="0" x:Name="LocalVideosCount"/>

                        <TextBlock Text="Nahráno na server:" Margin="0,24,0,0"/>
                        <TextBlock Text="0" x:Name="UploadedCount"/>

                        <TextBlock Text="Celková velikost dat v telefonu:" Margin="0,24,0,0"/>
                        <TextBlock Text="0 MB" x:Name="LocalDataSize"/>

                        <TextBlock Text="Data na serveru:" Margin="0,24,0,0"/>
                        <TextBlock Text="0 GiB" x:Name="ServerDataSize"/>

                        <TextBlock Text="Volné místo na serveru:" Margin="0,24,0,0"/>
                        <TextBlock Text="0 GiB" x:Name="ServerFreeSpace"/>

                    </StackPanel>
                </ScrollViewer>
            </phone:PanoramaItem>

            <!-- ========================= -->
            <!--         SETTINGS          -->
            <!-- ========================= -->
            <phone:PanoramaItem Header="Nastavení">

                <phone:Pivot Margin="0,-30,-30,0">

                        <!-- LOGIN -->
                        <phone:PivotItem Header="Přihlášení">
                            <StackPanel Margin="24,0,24,0">
                                <TextBlock Text="Email" FontSize="24"/>
                                <TextBox x:Name="EmailBox" />

                                <TextBlock Text="Heslo" Margin="0" FontSize="24"/>
                                <Grid>
                                    <PasswordBox x:Name="PasswordBox" Width="400" />
                                    <TextBox x:Name="PasswordTextBox" Width="400" Visibility="Collapsed" />
                                </Grid>
                                <CheckBox x:Name="ShowPasswordCheckBox" Content="Zobrazit heslo" Margin="0,-8,0,0" Checked="ShowPasswordCheckBox_Checked" Unchecked="ShowPasswordCheckBox_Unchecked" FontFamily="Portable User Interface" />
                                <Button Content="Otestovat připojení" Width="160" Margin="0,24,0,0" Click="NetTest_Click"/>
                            </StackPanel>
                        </phone:PivotItem>

                        <!-- SERVERS -->
                        <phone:PivotItem Header="Servery">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="24,0,24,0" x:Name="ServerSettingsPanel">
                                    <TextBlock Text="Chytré Wi-Fi připojení"
                                               Style="{StaticResource PhoneTextLargeStyle}" Margin="0,0,-12,0" />

                                    <TextBlock Text="Internetová adresa serveru:" Margin="0,10,0,0" FontSize="24"/>
                                    <TextBox x:Name="GlobalDomainBox" Width="400" Margin="0,4,0,0"/>

                                    <TextBlock Text="Lokální IP adresa serveru:" Margin="0,10,0,0" FontSize="24"/>
                                    <TextBox x:Name="LocalIpBox" Width="400" Margin="0,4,0,0"/>

                                    <TextBlock Text="SSID pro lokální připojení:" Margin="0,10,0,0" FontSize="24"/>
                                    <StackPanel Orientation="Vertical" x:Name="SSIDListPanel">
                                        <!-- Dynamicky generované inputy pro SSID -->
                                    </StackPanel>
                                    <Button Content="Přidat SSID" x:Name="AddSSIDButton" Width="180" Margin="0,8,0,0" Click="AddSSIDButton_Click"/>
                                    <CheckBox x:Name="IgnoreSslErrorsCheckBox" Content="Povolit neplatný SSL" Margin="0,24,0,0" FontFamily="Portable User Interface"/>

                                    <Button Content="Uložit" x:Name="SaveServerSettingsButton" Width="160" Margin="0,24,0,0" Click="SaveServerSettingsButton_Click" Visibility="Collapsed"/>
                                </StackPanel>
                            </ScrollViewer>
                        </phone:PivotItem>

                        <!-- DIRECTORIES -->
                        <phone:PivotItem Header="Adresáře">
                            <Grid Margin="24,0,24,0">

                                <Grid Margin="0,-34,0,0">
                                    <!-- Folder List Panel -->
                                <StackPanel x:Name="FolderListPanel" HorizontalAlignment="Stretch" VerticalAlignment="Top" Visibility="Visible">
                                        <TextBlock Text="Složky ke skenování"
                                                   Style="{StaticResource PhoneTextLargeStyle}" />
                                        <ListBox x:Name="FolderList" Margin="0,20,0,0">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="{Binding}" Width="300"/>
                                                        <Button Content="X"
                                                                Tag="{Binding}"
                                                                Click="RemoveFolder_Click"/>
                                                    </StackPanel>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                        <Button Content="Přidat složku"
                                                Margin="0,24,0,0"
                                                Click="AddFolder_Click"/>
                                    </StackPanel>
                                    <!-- Folder Picker Panel -->
                                    <StackPanel x:Name="FolderPickerPanel" HorizontalAlignment="Stretch" VerticalAlignment="Top" Visibility="Collapsed">
                                        <TextBlock Text="Vyberte složky"
                                                   FontSize="32"
                                                   Margin="0,0,0,20"/>
                                        <ListBox x:Name="FolderPickerList" MaxHeight="250">
                                            <ListBox.ItemTemplate>
                                                <DataTemplate>
                                                    <CheckBox Content="{Binding}" Tag="{Binding}"/>
                                                </DataTemplate>
                                            </ListBox.ItemTemplate>
                                        </ListBox>
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                                            <Button Content="Zrušit" Margin="0,0,20,0" Click="CancelFolderPicker_Click"/>
                                            <Button Content="OK" Click="ConfirmFolderPicker_Click"/>
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>

                            </Grid>
                        </phone:PivotItem>


                        <!-- MORE -->
                        <phone:PivotItem Header="Jiné">
                            <StackPanel Margin="0,0,0,0">
                                <TextBlock Text="Počet fotek na řádek (2-6):" Margin="0,0,0,0" FontSize="24"/>
                                <TextBox x:Name="PhotosPerRowBox" Width="80" Margin="0, -5, 0, 0" Height="65" Text="4" InputScope="Number" TextChanged="PhotosPerRowBox_TextChanged" HorizontalAlignment="Left"/>
                            </StackPanel>
                        </phone:PivotItem>

                    </phone:Pivot>

            </phone:PanoramaItem>

        </phone:Panorama>


        <StackPanel x:Name="ScanProgressPanel" Visibility="Collapsed"
            Background="#AA000000" VerticalAlignment="Bottom">

            <ProgressBar x:Name="ScanProgressBar" Height="6" Minimum="0" Maximum="100" Value="69"/>

            <TextBlock x:Name="ScanProgressText"
                Foreground="White"
                FontSize="20"
                Margin="0,8,0,0"/>

            <TextBlock x:Name="ScanCurrentFileText"
                Foreground="White"
                FontSize="16"
                Opacity="0.8"/>
        </StackPanel>

        <StackPanel x:Name="NetworkTestOverlay" Visibility="Collapsed"
            VerticalAlignment="Center"
            HorizontalAlignment="Stretch"
            Background="#DD002138">

            <TextBlock Text="Testování připojení k serveru..."
                       Foreground="White"
                       FontSize="32"
                       TextWrapping="Wrap"
                       TextAlignment="Center"
                       HorizontalAlignment="Stretch"
                       Margin="0, 15, 0, 0"/>
            <TextBlock x:Name="NetworkTestResultText"
                       Foreground="White"
                       FontSize="20"
                       TextWrapping="Wrap"
                       TextAlignment="Left"
                       Margin="0,12,0,0"
                       HorizontalAlignment="Stretch"/>
            <Button x:Name="CloseTestOverlayButton"  Content="Zavřít"
                    Width="160"
                    Margin="0,24,0,0"
                    Click="CloseNetworkTestOverlay_Click"/>
        </StackPanel>

    </Grid>
</phone:PhoneApplicationPage>
